build:
  gpu: true
  python_version: "3.11"
  python_requirements: "requirements.txt"
  cuda: "12.1"

  # CRITICAL FIX: Expanded system packages for robust compilation, resolving unicodeobject.o error.
  system_packages:
    - "build-essential"   # Provides the core compiler (gcc, make)
    - "libssl-dev"        # Required for secure downloads and Python's SSL module
    - "zlib1g-dev"        # Compression libraries
    - "libbz2-dev"        
    - "libreadline-dev"   
    - "libsqlite3-dev"    
    - "libffi-dev"        
    - "liblzma-dev"       
    - "python3-dev"       # Python header files (Needed for custom C extensions)
    - "git"
    - "curl"              

  # CRITICAL FIX: Manually install Unsloth to bypass 'metadata-generation-failed' errors.
  run:
    - pip install unsloth[lora]==2024.9 
    
train: "train.py:train" 
predict: "predict.py:Predictor"

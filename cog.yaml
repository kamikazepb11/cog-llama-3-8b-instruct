build:
  gpu: true
  python_version: "3.11"
  python_requirements: "requirements.txt"
  cuda: "12.1"

  # System packages (as previously defined)
  system_packages:
    - "build-essential"
    - "libssl-dev"
    # ... (rest of system packages remain the same)
    - "curl"

  # CRITICAL FIX: Adding Cache Cleanup steps BEFORE installing Unsloth
  run:
    # 1. Clear APT cache (Linux system package cache)
    - rm -rf /var/lib/apt/lists/*
    # 2. Clear PIP cache
    - pip cache purge 
    # 3. Manually install Unsloth (the biggest complexity)
    - pip install unsloth[lora]==2024.9

train: "train.py:train"
predict: "predict.py:Predictor"

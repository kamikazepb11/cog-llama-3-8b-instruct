build:
  gpu: true
  python_version: "3.10" 
  python_requirements: "requirements.txt"
  # REMOVED: cuda: "12.1" - Rely on Cog's automatic CUDA version for stability

  # REMOVED: All system_packages (rely on base image stability)
  
  # FINAL CRITICAL FIX: Only run necessary package installs, relying on minimal dependencies
  run:
    # 1. Install Unsloth with --no-deps (Its dependencies are handled by pip -r)
    - pip install unsloth[lora]==2024.9 --no-deps
    # 2. Aggressive cleanup of PIP cache (to recover space)
    - pip cache purge
    
train: "train.py:train" 
predict: "predict.py:Predictor"

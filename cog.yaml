build:
  gpu: true
  python_version: "3.11"
  python_requirements: "requirements.txt"
  cuda: "12.1"
  
  # CRITICAL FIX: Allocate more space for compilation and installation to solve "No space left"
  build_disk_space: 100 # Allocates 100 GB for the build environment
  
  # System libraries needed for full Python compilation (to resolve symtable.o and sysmodule.o errors)
  system_packages:
    - "build-essential"   
    - "libssl-dev"        
    - "zlib1g-dev"        
    - "libbz2-dev"        
    - "libreadline-dev"   
    - "libsqlite3-dev"    
    - "libffi-dev"        
    - "liblzma-dev"       
    - "python3-dev"       
    - "tk-dev"            
    - "libncurses5-dev"   
    - "libgdbm-dev"       
    - "libc6-dev"         
    - "libblas-dev"       
    - "liblapack-dev"     
    - "git"
    - "curl"              

  # Manually install Unsloth to bypass 'metadata-generation-failed' errors.
  run:
    - pip install unsloth[lora]==2024.9 
    
train: "train.py:train" 
predict: "predict.py:Predictor"
